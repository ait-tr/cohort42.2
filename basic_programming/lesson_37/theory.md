# Лекция: Обработка ошибок в Java

## Введение

Обработка ошибок является важной частью программирования на Java. Она позволяет программам справляться с неожиданными ситуациями и предотвращать их крах. В Java для обработки ошибок используется механизм исключений, который обеспечивает структурированный подход к выявлению и обработке ошибок.

## Исключения в Java

Исключения (exceptions) — это объекты, которые описывают ошибки или другие исключительные ситуации, возникающие во время выполнения программы. В Java все исключения являются наследниками класса `Throwable`. Основными подклассами `Throwable` являются `Exception` и `Error`.

- `Exception`: представляет ошибки, которые могут быть обработаны программой. Сюда входят проверяемые исключения (`checked exceptions`) и непроверяемые исключения (`unchecked exceptions`).
- `Error`: представляет серьёзные ошибки, связанные с проблемами среды выполнения, которые обычно не могут быть обработаны программой (например, `OutOfMemoryError`).

## Проверяемые и непроверяемые исключения

### Проверяемые исключения

Проверяемые исключения (checked exceptions) наследуются от класса `Exception`, но не от `RuntimeException`. Эти исключения проверяются на этапе компиляции, и программист обязан либо обработать такие исключения, либо объявить их в сигнатуре метода с использованием ключевого слова `throws`.

Примеры проверяемых исключений:
- `IOException`
- `SQLException`
- `ClassNotFoundException`

### Непроверяемые исключения

Непроверяемые исключения (unchecked exceptions) наследуются от класса `RuntimeException`. Эти исключения не проверяются на этапе компиляции, и программист не обязан их обрабатывать.

Примеры непроверяемых исключений:
- `NullPointerException`
- `ArrayIndexOutOfBoundsException`
- `ArithmeticException`

## Основные конструкции для обработки исключений

### Блок try-catch

Для обработки исключений в Java используется блок `try-catch`. Код, который может вызвать исключение, помещается в блок `try`, а обработка исключения — в блок `catch`.

```java
try {
    // Код, который может вызвать исключение
} catch (ExceptionType1 e1) {
    // Обработка исключения типа ExceptionType1
} catch (ExceptionType2 e2) {
    // Обработка исключения типа ExceptionType2
}
```

### Блок finally

Блок `finally` используется для выполнения кода, который должен быть выполнен независимо от того, было ли выброшено исключение или нет. Он обычно применяется для освобождения ресурсов (например, закрытия файлов или сетевых соединений).

```java
try {
    // Код, который может вызвать исключение
} catch (ExceptionType e) {
    // Обработка исключения
} finally {
    // Код, который будет выполнен в любом случае
}
```

### Ключевое слово throws

Если метод может выбросить проверяемое исключение, оно должно быть объявлено в его сигнатуре с использованием ключевого слова `throws`.

```java
public void myMethod() throws IOException {
    // Код, который может вызвать IOException
}
```

### Пример

Рассмотрим пример, где обрабатывается исключение при работе с файлом:

```java
import java.io.*;

public class FileExample {
    public static void main(String[] args) {
        FileReader fr = null;
        try {
            fr = new FileReader("myfile.txt");
            int i;
            while ((i = fr.read()) != -1) {
                System.out.print((char) i);
            }
        } catch (FileNotFoundException e) {
            System.out.println("Файл не найден: " + e);
        } catch (IOException e) {
            System.out.println("Ошибка ввода-вывода: " + e);
        } finally {
            try {
                if (fr != null) {
                    fr.close();
                }
            } catch (IOException e) {
                System.out.println("Ошибка при закрытии файла: " + e);
            }
        }
    }
}
```

## Создание собственных исключений

Java позволяет создавать собственные классы исключений. Это полезно, когда нужно сообщить об ошибках, специфичных для вашего приложения.

```java
class MyException extends Exception {
    public MyException(String message) {
        super(message);
    }
}

public class CustomExceptionExample {
    public static void main(String[] args) {
        try {
            throw new MyException("Это мое собственное исключение");
        } catch (MyException e) {
            System.out.println("Поймано исключение: " + e.getMessage());
        }
    }
}
```

## Советы по обработке исключений

1. **Не используйте пустые блоки catch**: всегда обрабатывайте исключения, даже если это простое логирование.
2. **Иерархия исключений**: используйте более специфичные классы исключений перед общими.
3. **Не злоупотребляйте checked exceptions**: их слишком частое использование может сделать код трудным для чтения.
4. **Используйте finally для освобождения ресурсов**: это гарантирует, что ресурсы будут освобождены независимо от того, произошло исключение или нет.
5. **Не ловите исключения, которые не можете обработать**: позвольте им проброситься выше.
